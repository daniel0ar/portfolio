(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[73],{38216:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/campaigns/requests",function(){return t(32601)}])},32601:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return I}});var n=t(47568),s=t(51438),a=t(52951),l=t(88029),i=t(60460),c=t(34051),o=t.n(c),d=t(85893),u=t(67294),p=t(83544),h=t(87462),v=t(13871),f=t(86010),m=t(98459),Z=t(28935),x=t(12519),g=t(92248);function b(e){var r=e.children,t=e.className,n=(0,f.Z)(t),s=(0,Z.Z)(b,e),a=(0,x.Z)(b,e);return u.createElement(a,(0,h.Z)({},s,{className:n}),r)}b.handledProps=["as","children","className"],b.defaultProps={as:"tbody"},b.propTypes={};var w=b,k=t(69591),G=t(45150);function j(e){var r=e.active,t=e.children,n=e.className,s=e.collapsing,a=e.content,l=e.disabled,i=e.error,c=e.icon,o=e.negative,d=e.positive,p=e.selectable,v=e.singleLine,b=e.textAlign,w=e.verticalAlign,k=e.warning,A=e.width,N=(0,f.Z)((0,m.lG)(r,"active"),(0,m.lG)(s,"collapsing"),(0,m.lG)(l,"disabled"),(0,m.lG)(i,"error"),(0,m.lG)(o,"negative"),(0,m.lG)(d,"positive"),(0,m.lG)(p,"selectable"),(0,m.lG)(v,"single line"),(0,m.lG)(k,"warning"),(0,m.X4)(b),(0,m.Ok)(w),(0,m.H0)(A,"wide"),n),R=(0,Z.Z)(j,e),y=(0,x.Z)(j,e);return g.kK(t)?u.createElement(y,(0,h.Z)({},R,{className:N}),G.Z.create(c),a):u.createElement(y,(0,h.Z)({},R,{className:N}),t)}j.handledProps=["active","as","children","className","collapsing","content","disabled","error","icon","negative","positive","selectable","singleLine","textAlign","verticalAlign","warning","width"],j.defaultProps={as:"td"},j.propTypes={},j.create=(0,k.u5)(j,(function(e){return{content:e}}));var A=j;function N(e){var r=e.children,t=e.className,n=e.content,s=e.fullWidth,a=(0,f.Z)((0,m.lG)(s,"full-width"),t),l=(0,Z.Z)(N,e),i=(0,x.Z)(N,e);return u.createElement(i,(0,h.Z)({},l,{className:a}),g.kK(r)?n:r)}N.handledProps=["as","children","className","content","fullWidth"],N.defaultProps={as:"thead"},N.propTypes={};var R=N;function y(e){var r=e.as,t=(0,Z.Z)(y,e);return u.createElement(R,(0,h.Z)({},t,{as:r}))}y.handledProps=["as"],y.propTypes={},y.defaultProps={as:"tfoot"};var P=y;function q(e){var r=e.as,t=e.className,n=e.sorted,s=(0,f.Z)((0,m.cD)(n,"sorted"),t),a=(0,Z.Z)(q,e);return u.createElement(A,(0,h.Z)({},a,{as:r,className:s}))}q.handledProps=["as","className","sorted"],q.propTypes={},q.defaultProps={as:"th"};var E=q;function C(e){var r=e.active,t=e.cellAs,n=e.cells,s=e.children,a=e.className,l=e.disabled,i=e.error,c=e.negative,o=e.positive,d=e.textAlign,p=e.verticalAlign,b=e.warning,w=(0,f.Z)((0,m.lG)(r,"active"),(0,m.lG)(l,"disabled"),(0,m.lG)(i,"error"),(0,m.lG)(c,"negative"),(0,m.lG)(o,"positive"),(0,m.lG)(b,"warning"),(0,m.X4)(d),(0,m.Ok)(p),a),k=(0,Z.Z)(C,e),G=(0,x.Z)(C,e);return g.kK(s)?u.createElement(G,(0,h.Z)({},k,{className:w}),(0,v.Z)(n,(function(e){return A.create(e,{defaultProps:{as:t}})}))):u.createElement(G,(0,h.Z)({},k,{className:w}),s)}C.handledProps=["active","as","cellAs","cells","children","className","disabled","error","negative","positive","textAlign","verticalAlign","warning"],C.defaultProps={as:"tr",cellAs:"td"},C.propTypes={},C.create=(0,k.u5)(C,(function(e){return{cells:e}}));var _=C;function T(e){var r=e.attached,t=e.basic,n=e.celled,s=e.children,a=e.className,l=e.collapsing,i=e.color,c=e.columns,o=e.compact,d=e.definition,p=e.fixed,b=e.footerRow,k=e.headerRow,G=e.headerRows,j=e.inverted,A=e.padded,N=e.renderBodyRow,y=e.selectable,q=e.singleLine,E=e.size,C=e.sortable,z=e.stackable,H=e.striped,L=e.structured,B=e.tableData,D=e.textAlign,O=e.unstackable,X=e.verticalAlign,F=(0,f.Z)("ui",i,E,(0,m.lG)(n,"celled"),(0,m.lG)(l,"collapsing"),(0,m.lG)(d,"definition"),(0,m.lG)(p,"fixed"),(0,m.lG)(j,"inverted"),(0,m.lG)(y,"selectable"),(0,m.lG)(q,"single line"),(0,m.lG)(C,"sortable"),(0,m.lG)(z,"stackable"),(0,m.lG)(H,"striped"),(0,m.lG)(L,"structured"),(0,m.lG)(O,"unstackable"),(0,m.sU)(r,"attached"),(0,m.sU)(t,"basic"),(0,m.sU)(o,"compact"),(0,m.sU)(A,"padded"),(0,m.X4)(D),(0,m.Ok)(X),(0,m.H0)(c,"column"),"table",a),K=(0,Z.Z)(T,e),U=(0,x.Z)(T,e);if(!g.kK(s))return u.createElement(U,(0,h.Z)({},K,{className:F}),s);var I={defaultProps:{cellAs:"th"}},W=(k||G)&&u.createElement(R,null,_.create(k,I),(0,v.Z)(G,(function(e){return _.create(e,I)})));return u.createElement(U,(0,h.Z)({},K,{className:F}),W,u.createElement(w,null,N&&(0,v.Z)(B,(function(e,r){return _.create(N(e,r))}))),b&&u.createElement(P,null,_.create(b)))}T.handledProps=["as","attached","basic","celled","children","className","collapsing","color","columns","compact","definition","fixed","footerRow","headerRow","headerRows","inverted","padded","renderBodyRow","selectable","singleLine","size","sortable","stackable","striped","structured","tableData","textAlign","unstackable","verticalAlign"],T.defaultProps={as:"table"},T.propTypes={},T.Body=w,T.Cell=A,T.Footer=P,T.Header=R,T.HeaderCell=E,T.Row=_;var z=T,H=t(80967),L=t(96215),B=t(14148),D=t(4111),O=t(14924),X=t(1508),F=function(e){(0,l.Z)(t,e);var r=(0,i.Z)(t);function t(){var e;(0,s.Z)(this,t),e=r.apply(this,arguments);var a=(0,D.Z)(e);(0,O.Z)((0,D.Z)(e),"onApprove",(0,n.Z)(o().mark((function e(){var r,t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,B.Z)(a.props.address),e.next=3,X.Z.eth.getAccounts();case 3:return t=e.sent,e.next=6,r.methods.approveRequest(a.props.id).send({from:t[0]});case 6:L.Router.replaceRoute("/campaigns/".concat(a.props.address,"/requests"));case 7:case"end":return e.stop()}}),e)}))));var l=(0,D.Z)(e);return(0,O.Z)((0,D.Z)(e),"onFinalize",(0,n.Z)(o().mark((function e(){var r,t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,B.Z)(l.props.address),e.next=3,X.Z.eth.getAccounts();case 3:return t=e.sent,e.next=6,r.methods.finalizeRequest(l.props.id).send({from:t[0]});case 6:case"end":return e.stop()}}),e)})))),e}return(0,a.Z)(t,[{key:"render",value:function(){var e=z.Row,r=z.Cell,t=this.props,n=t.id,s=t.contributors,a=t.request,l=a.approvalCount>s/2;return(0,d.jsxs)(e,{disabled:a.complete,children:[(0,d.jsx)(r,{children:n}),(0,d.jsx)(r,{children:a.description}),(0,d.jsx)(r,{children:X.Z.utils.fromWei(a.value,"ether")}),(0,d.jsx)(r,{children:a.recipient}),(0,d.jsxs)(r,{children:[a.approvalCount,"/",s]}),(0,d.jsxs)(r,{children:[a.complete?null:(0,d.jsx)(H.Z,{color:"green",inverted:!0,onClick:this.onApprove,children:"Approve"}),a.complete?null:(0,d.jsx)(H.Z,{primary:!0,onClick:this.onFinalize,disabled:!l,children:"Finalize"})]})]})}}]),t}(u.Component),K=F,U=function(e){(0,l.Z)(t,e);var r=(0,i.Z)(t);function t(){return(0,s.Z)(this,t),r.apply(this,arguments)}return(0,a.Z)(t,[{key:"renderRequestRows",value:function(){var e=this;return this.props.requests.map((function(r,t){return(0,d.jsx)(K,{id:t,request:r,address:e.props.address,contributors:e.props.contributors},t)}))}},{key:"render",value:function(){var e=z.Header,r=z.Row,t=z.HeaderCell,n=z.Body;return(0,d.jsxs)(p.Z,{children:[(0,d.jsx)(L.Link,{route:"/campaigns/".concat(this.props.address),children:(0,d.jsx)("a",{children:"< Go Back"})}),(0,d.jsx)("h3",{children:"Requests of Campaign"}),(0,d.jsx)(L.Link,{route:"/campaigns/".concat(this.props.address,"/requests/new"),children:(0,d.jsx)("a",{children:(0,d.jsx)(H.Z,{primary:!0,children:"Add Requets"})})}),(0,d.jsxs)(z,{children:[(0,d.jsx)(e,{children:(0,d.jsxs)(r,{children:[(0,d.jsx)(t,{children:"ID"}),(0,d.jsx)(t,{children:"Description"}),(0,d.jsx)(t,{children:"Amount"}),(0,d.jsx)(t,{children:"Recipient"}),(0,d.jsx)(t,{children:"Approvals"}),(0,d.jsx)(t,{children:"Actions"})]})}),(0,d.jsx)(n,{children:this.renderRequestRows()})]}),(0,d.jsxs)("div",{children:[" Total: ",this.props.requestsCount," requests"]})]})}}],[{key:"getInitialProps",value:function(e){return(0,n.Z)(o().mark((function r(){var t,n,s,a,l;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.query.address,n=(0,B.Z)(t),r.next=4,n.methods.getRequestsCount().call();case 4:return s=r.sent,r.next=7,n.methods.approversCount().call();case 7:return a=r.sent,r.next=10,Promise.all(Array(parseInt(s)).fill().map((function(e,r){return n.methods.requests(r).call()})));case 10:return l=r.sent,r.abrupt("return",{address:t,requests:l,requestsCount:s,contributors:a});case 12:case"end":return r.stop()}}),r)})))()}}]),t}(u.Component),I=U}},function(e){e.O(0,[774,482,714,469,937,888,179],(function(){return r=38216,e(e.s=r);var r}));var r=e.O();_N_E=r}]);